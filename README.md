# Setup and Run Rasa Bot. 

Rasa is an open source machine learning framework for building AI assistants and chatbots. Mostly you don’t need any programming language experience to work in Rasa. Although there is something called “Rasa Action Server” where you need to write code in Python, that mainly used to trigger External actions like Calling Google API or REST API etc.



#### Rasa has two main modules: 

- Rasa NLU for understanding user messages
- Rasa Core for holding conversations and deciding what to do next

#### Install Rasa
By following command, both Rasa and Rasa X will be installed in your system.
```
conda install python=3.6
conda create -n rasa python=3.6
source activate rasa
pip install rasa-x --extra-index-url https://pypi.rasa.com/simple
```

#### Create a new Project in Rasa
Open Terminal and activate Conda Virtual Environment. Now go-to one directory and do “rasa init”, it will create a Rasa Project at that location. “rasa x” will start the Rasa X application
```
source activate rasa
rasa init
```

`rasa init` should show the welcome message, in-case you are doing well and your system doesn’t contain any error. Follow the interactive session and continue pressing enter to reach the last step. 

> Note: If you do `ls -la` in a terminal, you can see a list of files which are created by Rasa. Now do `rasa x` to start Rasa.

#### Rasa Configuration
Let me explain about files, which are created as Initial project structure of Rasa.

`__init__.pyan` empty file that helps python find your actions

`actions.py` code for your custom actions. In-case you want Rasa to call external server via REST API or API call, you can define your Custom Actions here. Remember you can create multiple Python Script for Rasa Custom Action.

`config.yml` configuration of your NLU and Core models. In-case you are dealing with Tensorflow or Spacy, you need to define such pipeline here. To handle this file, you show know about Machine Learning and Deep Learning.

`credentials.yml` details for connecting to other services. In case you want to build Bot on Facebook Messenger, Microsoft Bot Framework, you can maintain such credential and token here. So basically you just need to add Facebook, slack and Bot framework related configuration, rasa will automatically do rest for you. Remember that you need to host Rasa over https domain. During development, you can use ngrok as a testing tool.

`data/nlu.md` your NLU training data. Here you can define Intent. Like Order Pizza or Book Uber. You need to add related Sentences for that Intent. Remember if you are using Rasa-X, your training Intent and Data will be added automatically.

`data/stories.md` your stories. This is required for Rasa Core. There is something called “Dialog Flow in Rasa” where Rasa Core controls the flow of the conversation between you and chatbot, so for that flow, you need to train chatbot using these stories. So in case you want your chatbot to be very perfect on different context (stories) you can add those stories here.

`domain.yml` your assistant’s domain. This file combines Different Intent which chatbot can detect and list of Bot replies. Remember you can define your Custom Action Server Python method name here (in underscore format), so that Rasa will call that python method for you.

`endpoints.yml` details for connecting to channels like FB messenger. This is mainly used for production setup. You can configure your Database like Redis so that Rasa can store tracking information.

`models/<timestamp>.tar.gz`  your initial model. 


## Example of implementing custom classifiers for Rasa

This repository is an example of a simple Rasa project that shows how you can implement your own classifiers.
The data was automatically generated by running:
```
rasa init
```

## The SkLearn Classifier
`sklearn_classifier.py` exemplifies implementing a simple SVM classifier. 

## Hugging Face Transformers Classifier
`transformer_classifier.py` can take any Hugging Face transformer that has an AutoModelForSequenceClassification implementation and train it. We're using `albert-base-v2` as an example because it is a small model trainable without the need for a GPU.

## config.yml

`config.yml` contains examples of how you would insert the two classifiers into the Rasa pipeline, and how you would pass parameters to them.

## Running the project

To train the custom rasa intent classification model:
```rasa train nlu```

To test the model:
```rasa test nlu --nlu <path_to_test_data>```

To interact with the model:
```rasa shell```

